"use strict";if(document.querySelectorAll(".cta-block").length){var fetchmeajoke=function(){var e=new XMLHttpRequest;e.open("GET","//api.icndb.com/jokes/random?escape=javascript",!0),e.onload=function(){if(e.status>=200&&e.status<400){var t=e.response;jokeContainer.innerText=JSON.parse(t).value.joke}else console.err("Error retrieving data")},e.onerror=function(){console.err("Error reaching server")},e.send()},fetchButton=document.getElementById("fetchBtn"),jokeContainer=document.getElementById("joke");fetchButton.addEventListener("click",function(e){e.preventDefault(),fetchmeajoke()})}document.addEventListener("DOMContentLoaded",function(){function e(e,t){if(e.classList)e.classList.toggle(t);else{var c=e.className.split(" "),n=c.indexOf(t);n>=0?c.splice(n,1):c.push(t),e.className=c.join(" ")}}function t(t,s){[].forEach.call(t,function(t){t.addEventListener("change",function(r){var i=r.target.value;t.dataset.filter,t.getAttribute("class"),document.querySelectorAll(s+":checked");a.classList.contains("filteringOn")||a.classList.add("filteringOn");var o=document.querySelectorAll('.contents-list li[data-filter*="'+t.value+'"]');if([].forEach.call(o,function(t){e(t,"checked"),c({value:i})}),t.checked)n(t.value,t.dataset.filter,t.getAttribute("class"));else{var u=document.querySelector(".selected-filters"),d=document.querySelector('.selected-filters span[value="'+t.value+'"]');document.querySelectorAll(".filter-list:checked").length&&document.querySelectorAll(".filter-radio:checked").length||a.classList.remove("filteringOn"),null!=d&&l(u,d)}})})}function c(){var e=document.querySelector(".results-message"),t=document.querySelectorAll(".contents-list li.checked");if(t.length)e.innerHTML="Displaying "+t.length+" of "+t.length;else{var c=document.querySelectorAll(".contents-list li").length;e.innerHTML="Displaying "+c+" of "+c}}function n(e,t,c){if(void 0!=e){var n=document.querySelector(".selected-filters"),r=document.createElement("span");if(r.classList.add("badge","checked"),r.setAttribute("data-filter",t),r.setAttribute("data-control",c),r.setAttribute("value",e),r.innerHTML=e,n.children.length){var i=document.querySelector('.selected-filters span[value="'+e+'"]');if(null!=i)return!1}n.insertBefore(r,n.firstChild),r.addEventListener("click",function(e){var t=e.target;console.log(n.childElementCount),n.childElementCount<2&&(a.classList.contains("filteringOn")?a.classList.remove("filteringOn"):a.classList.contains("filteringByTextOn")&&a.classList.remove("filteringByTextOn")),l(n,e.target);var c=t.dataset.filter,r=t.dataset.control;s(c,e.target,r)})}}function l(e,t){console.log(t.innerHTML);var n=document.querySelectorAll('.contents-list li[data-filter*="'+t.innerHTML+'"]');if(console.log(n),[].forEach.call(n,function(e){console.log("REMOVING"),console.log(e),e.classList.contains("checked")&&e.classList.remove("checked")}),e.removeChild(t),document.querySelectorAll('.search-list li[data-selected="true"]').length){var l=document.querySelectorAll('.search-list li[data-selected="true"]')[0];l.setAttribute("data-selected","false"),document.getElementById("search-text-input").value=""}c()}function s(e,t,c){var n=document.querySelectorAll("."+c+'[data-filter*="'+e+'"][value="'+t.innerHTML+'"]');console.log(n),[].forEach.call(n,function(e){e.checked=!1})}function r(e){console.log(e),[].forEach.call(e,function(t){console.log(e),[].forEach.call(t,function(e){e.checked=!1})})}var a=document.getElementById("contentsParent");if(document.querySelectorAll(".filterable-content-block").length){document.addEventListener("click",function(){document.querySelector(".search-list").classList.contains("active")&&document.querySelector(".search-list").classList.remove("active")});var i=document.getElementById("search-input"),o=document.createElement("div");i.insertBefore(o,i.firstChild),o.className+=" search icon";var u=document.querySelectorAll(".toggle");[].forEach.call(u,function(t){t.addEventListener("click",function(t){var c=t.target;e(c,"expanded");var n=c.nextElementSibling;e(n,"show")})});var d=document.querySelector("#search-input");document.querySelector("#search-text-input").value.length&&a.classList.contains("filteringByTextOn")&&a.classList.add("filteringByTextOn"),d.addEventListener("keyup",function(e){var t=e.targegulpt.value,n=new RegExp(t,"i"),l=document.querySelector(".search-list");if(l.classList.contains("active")||l.classList.add("active"),!document.querySelector("#search-input").classList.contains("active")){document.querySelector("#search-input").classList.add("active");var s=document.querySelector(".search-input.active .search.icon");s.addEventListener("click",function(e){console.log(e.target),document.querySelector("#search-text-input").value="",document.querySelector(".search-input.active").classList.contains("active")&&document.querySelector(".search-input.active").classList.remove("active");var n=document.querySelectorAll('.filteringTextOn li.checked[data-filter*="'+t+'"]');n.forEach(function(e){e.classList.contains("checked")&&e.classList.remove("checked")}),document.getElementById("contentsParent").classList.contains("filteringByTextOn")&&document.getElementById("contentsParent").classList.remove("filteringTextOn"),c()})}if(t.length<1){document.querySelector(".search-list").classList.contains("active")&&document.querySelector(".search-list").classList.remove("active"),a.classList.contains("filteringByTextOn")&&a.classList.remove("filteringByTextOn");var r=document.querySelectorAll(".contents-list li.checked");r.forEach(function(e){e.classList.contains("checked")&&e.classList.remove("checked")}),c()}for(var i=0;i<f.length;i++){var o=f[i];n.test(o.innerText)?o.className=o.className.replace(/\s+?hidden/,""):o.classList.contains("hidden")||(o.className=o.className+" hidden")}});var f=document.querySelector(".search-list").getElementsByTagName("li");[].forEach.call(f,function(e){e.addEventListener("click",function(t){t.target.value;e.dataset.selected=!0;var l=document.getElementById("search-text-input");l.value=e.innerHTML,n(l.value,e.dataset.filter,null),a.classList.contains("filteringByTextOn")||a.classList.add("filteringByTextOn");var s=document.querySelectorAll('.contents-list .info-name-year[data-name="'+e.innerHTML+'"]');s.forEach(function(e){e.parentNode.parentNode.classList.contains("checked")?e.parentNode.parentNode.classList.remove("checked"):(e.parentNode.parentNode.classList.add("checked"),c())})})});var m=".filter-list",v=document.querySelectorAll(m);t(v,m);var h=".filter-radio",g=document.querySelectorAll(h);t(g,h),c();var y=document.getElementById("clearfilters");y.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(".selected-filters");t.innerHTML=" ",a.classList.contains("filteringOn")&&a.classList.remove("filteringOn"),a.classList.contains("filteringByTextOn")&&a.classList.remove("filteringByTextOn");var n=document.querySelectorAll(".contents-list li");[].forEach.call(n,function(e){e.classList.contains("checked")&&e.classList.remove("checked")}),document.getElementById("search-text-input").value="";var l=document.querySelectorAll(".filter-list:checked"),s=document.querySelectorAll(".filter-radio:checked");r([l,s]),c()})}});